kind: job
metadata:
  name: grafana-dashboard-deployer
  tag: ''
  hash: 9a1908498ebd21f74e933bbffc10c4b2c795ff27
  project: stocks
spec:
  command: ''
  args: []
  image: mlrun/mlrun
  env: []
  default_handler: deploy_dashboard
  entry_points:
    deploy_dashboard:
      name: deploy_dashboard
      doc: ''
      parameters:
      - name: context
        default: ''
      - name: grafana_url
        type: str
        default: http://grafana
      - name: streamview_url
        type: str
        default: http://192.168.224.209:30100
      - name: v3io_container
        type: str
        default: bigdata
      - name: stocks_kv_table
        type: str
        default: stocks/stocks_kv
      - name: stocks_tsdb_table
        type: str
        default: stocks/stocks_tsdb
      outputs:
      - default: ''
      lineno: 6
  description: ''
  build:
    functionSourceCode: IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKZnJvbSBncmFmd2l6IGltcG9ydCAqCmltcG9ydCBvcwoKZGVmIGRlcGxveV9kYXNoYm9hcmQoY29udGV4dCwgCiAgICAgICAgICAgICAgICAgICAgIGdyYWZhbmFfdXJsOnN0ciA9ICdodHRwOi8vZ3JhZmFuYScsIAogICAgICAgICAgICAgICAgICAgICBzdHJlYW12aWV3X3VybDpzdHIgPSAnaHR0cDovLzE5Mi4xNjguMjI0LjIwOTozMDEwMCcsCiAgICAgICAgICAgICAgICAgICAgIHYzaW9fY29udGFpbmVyOnN0ciA9ICdiaWdkYXRhJywKICAgICAgICAgICAgICAgICAgICAgc3RvY2tzX2t2X3RhYmxlOnN0ciA9ICdzdG9ja3Mvc3RvY2tzX2t2JywKICAgICAgICAgICAgICAgICAgICAgc3RvY2tzX3RzZGJfdGFibGU6c3RyID0gJ3N0b2Nrcy9zdG9ja3NfdHNkYicpOgogICAgZGFzaCA9IERhc2hib2FyZCgic3RvY2tzIiwgc3RhcnQ9J25vdy0xZCcsIGRhdGFTb3VyY2U9J0lndWF6aW8nKQoKICAgIGRhc2gudGVtcGxhdGUobmFtZT0iU1lNQk9MIiwgbGFiZWw9IlN5bWJvbCIsIHF1ZXJ5PSJmaWVsZHM9c3ltYm9sO3RhYmxlPXN0b2Nrcy9zdG9ja3Nfa3Y7YmFja2VuZD1rdjtjb250YWluZXI9YmlnZGF0YSIpCgogICAgdGJsID0gVGFibGUoJ3RibDEnLHNwYW49OCkuc291cmNlKHRhYmxlPXN0b2Nrc19rdl90YWJsZSxmaWVsZHM9WydzeW1ib2wnLCd2b2x1bWUnLCAncHJpY2UnLCdsYXN0X3VwZGF0ZWQnXSxjb250YWluZXI9djNpb19jb250YWluZXIpCiAgICBsb2cgPSBBamF4KHRpdGxlPSdMb2cnLHVybD1zdHJlYW12aWV3X3VybCkKICAgIGRhc2gucm93KFt0YmwsbG9nXSkKCiAgICBkYXNoLnJvdyhbR3JhcGgobWV0cmljKS5zZXJpZXModGFibGU9c3RvY2tzX3RzZGJfdGFibGUsIGZpZWxkcz1bbWV0cmljXSwgZmlsdGVyPSdzeW1ib2w9PSIkU1lNQk9MIicsY29udGFpbmVyPXYzaW9fY29udGFpbmVyKSBmb3IgbWV0cmljIGluIFsncHJpY2UnLCd2b2x1bWUnLCdzZW50aW1lbnQnXV0pCgogICAgcmV0dXJuIGRhc2guZGVwbG95KGdyYWZhbmFfdXJsKQoK
    commands:
    - python -m pip install git+https://github.com/v3io/grafwiz.git
    code_origin: https://github.com/mlrun/demo-stocks#3bc1e249e620b82a73016bf23c9e73307772c211:grafana_dashboard_deployer.ipynb
